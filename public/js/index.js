(()=>{"use strict";const x=new class{get height(){return this.canvas.height}get width(){return this.canvas.width}constructor(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d")}drawImage(x,t,s,i,e){this.ctx.beginPath(),this.ctx.drawImage(x,t,s,i,e),this.ctx.closePath()}drawStrok(x,t,s,i,e){this.ctx.beginPath(),this.ctx.strokeStyle=x,this.ctx.strokeRect(t,s,i,e),this.ctx.closePath()}drawRect(x,t,s,i,e){this.ctx.beginPath(),this.ctx.fillStyle=x,this.ctx.fillRect(t,s,i,e),this.ctx.closePath()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}};function t(x,t){const s=(Math.random()*(t-x)+x).toString();return parseInt(s)}class s{constructor(x,s,i){this.blockSize=x,this.map=s,this.assets=i,this.wall_top_index=t(0,this.assets.wall_top.length),this.wall_down_index=t(0,this.assets.wall_down.length)}drawImage(t,s,i){x.drawImage(t,s*this.blockSize,i*this.blockSize,this.blockSize,this.blockSize)}colisionCheck(x,t){const s=parseInt((x/this.blockSize).toString()),i=parseInt((t/this.blockSize).toString());return"1"===this.map.colision[i][s]&&x>=s&&x<=s}renderColision(){this.map.colision.forEach(((t,s)=>{t.forEach(((t,i)=>{"1"===t&&x.drawStrok("red",i*this.blockSize,s*this.blockSize,this.blockSize,this.blockSize)}))}))}render(){this.map.view.forEach(((t,s)=>{t.forEach(((t,i)=>{switch(t){case"0":this.drawImage(this.assets.wall_pontas[0],i,s);break;case"1":this.drawImage(this.assets.wall_top[this.wall_top_index],i,s);break;case"2":this.drawImage(this.assets.wall_down[this.wall_down_index],i,s);break;case"3":this.drawImage(this.assets.wall_all_left[0],i,s);break;case"4":this.drawImage(this.assets.wall_all_right[0],i,s);break;case"5":this.drawImage(this.assets.wall_all_down[0],i,s);break;case"x":break;default:x.drawRect("black",i*this.blockSize,s*this.blockSize,this.blockSize,this.blockSize)}}))}))}}class i{get x(){return this._x}get y(){return this._y}get xMap(){return parseInt((this._x/this.blockSize).toString())}get yMap(){return parseInt((this._y/this.blockSize).toString())}get xRMap(){return parseInt(((this._x+.9*this.blockSize)/this.blockSize).toString())}get yRMap(){return parseInt(((this._y+.9*this.blockSize)/this.blockSize).toString())}get speed(){return this._speed}set colisionMap(x){this._colisionMap=x}constructor(x,t,s){this.colisionColor=t,this.blockSize=x,this._speed=x/s,this._x=x,this._y=x}render(){this.drawColisionRect()}checkColision(){return"1"==this._colisionMap[this.yMap][this.xMap]||"1"==this._colisionMap[this.yRMap][this.xMap]||"1"==this._colisionMap[this.yMap][this.xRMap]||"1"==this._colisionMap[this.yRMap][this.xRMap]}drawColisionRect(){x.drawRect(this.colisionColor,this.x,this.y,this.blockSize,this.blockSize)}toLeft(){this._x=this._x-this.speed,this.checkColision()&&(this._x=this._x+this.speed)}toRight(){this._x=this._x+this.speed,this.checkColision()&&(this._x=this._x-this.speed)}toTop(){this._y=this._y-this.speed,this.checkColision()&&(this._y=this._y+this.speed)}toDown(){this._y=this._y+this.speed,this.checkColision()&&(this._y=this._y-this.speed)}}const e={view:[["0","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","0"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["0","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","0"]],colision:[["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]]},a={wall_pontas:[document.getElementById("wall_pontas")],wall_all_right:[document.getElementById("wall_all_right")],wall_all_left:[document.getElementById("wall_all_left")],wall_all_down:[document.getElementById("wall_all_down")],wall_top:[document.getElementById("wall_top1"),document.getElementById("wall_top2")],wall_down:[document.getElementById("wall_down1"),document.getElementById("wall_down2")]};(class{static Main(){const t=new s(30,e,a),h=new i(30,"red",5);h.colisionMap=t.map.colision,document.onkeydown=function(x){switch(x.keyCode){case 38:h.toTop();break;case 40:h.toDown();break;case 37:h.toLeft();break;case 39:h.toRight()}},setInterval((function(){x.clear(),t.render(),h.render()}),1e3/60)}}).Main()})();