(()=>{"use strict";const x=new class{get height(){return this.canvas.height}get width(){return this.canvas.width}constructor(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d")}drawImage(x,t,i,e,s){this.ctx.beginPath(),this.ctx.drawImage(x,t,i,e,s),this.ctx.closePath()}drawStrok(x,t,i,e,s){this.ctx.beginPath(),this.ctx.strokeStyle=x,this.ctx.strokeRect(t,i,e,s),this.ctx.closePath()}drawRect(x,t,i,e,s){this.ctx.beginPath(),this.ctx.fillStyle=x,this.ctx.fillRect(t,i,e,s),this.ctx.closePath()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}};function t(x,t){const i=(Math.random()*(t-x)+x).toString();return parseInt(i)}class i{constructor(x,i,e){this.blockSize=x,this.map=i,this.assets=e,this.wall_top_index=t(0,this.assets.wall_top.length),this.wall_down_index=t(0,this.assets.wall_down.length)}drawImage(t,i,e){x.drawImage(t,i*this.blockSize,e*this.blockSize,this.blockSize,this.blockSize)}colisionCheck(x,t){const i=parseInt((x/this.blockSize).toString()),e=parseInt((t/this.blockSize).toString());return"1"===this.map.colision[e][i]&&x>=i&&x<=i}renderColision(){this.map.colision.forEach(((t,i)=>{t.forEach(((t,e)=>{"1"===t&&x.drawStrok("red",e*this.blockSize,i*this.blockSize,this.blockSize,this.blockSize)}))}))}render(){this.map.view.forEach(((t,i)=>{t.forEach(((t,e)=>{switch(t){case"0":this.drawImage(this.assets.wall_pontas[0],e,i);break;case"1":this.drawImage(this.assets.wall_top[this.wall_top_index],e,i);break;case"2":this.drawImage(this.assets.wall_down[this.wall_down_index],e,i);break;case"3":this.drawImage(this.assets.wall_all_left[0],e,i);break;case"4":this.drawImage(this.assets.wall_all_right[0],e,i);break;case"5":this.drawImage(this.assets.wall_all_down[0],e,i);break;case"x":x.drawStrok("gray",e*this.blockSize,i*this.blockSize,this.blockSize,this.blockSize);break;case"h":x.drawStrok("green",e*this.blockSize,i*this.blockSize,this.blockSize,this.blockSize);break;case"g":x.drawRect("black",e*this.blockSize,i*this.blockSize,this.blockSize,this.blockSize)}}))}))}}class e{get x(){return this._x}get y(){return this._y}get xMap(){return parseInt((this._x/this.blockSize).toString())}get yMap(){return parseInt((this._y/this.blockSize).toString())}get xRMap(){return parseInt(((this._x+.9*this.blockSize)/this.blockSize).toString())}get yRMap(){return parseInt(((this._y+.9*this.blockSize)/this.blockSize).toString())}get speed(){return this._speed}get direction(){return this._direction}get eventRadarPosition(){const x={x:0,y:0,xMap:0,yMap:0,xRMap:0,yRMap:0,w:0,h:0};switch(this.direction){case"-y":x.w=this.blockSize/10,x.h=1,x.x=this.x+this.blockSize/1.9-x.w,x.y=this.y-1;break;case"+y":x.w=this.blockSize/10,x.h=1,x.x=this.x+this.blockSize/1.9-x.w,x.y=this.y+this.blockSize;break;case"-x":x.w=1,x.h=this.blockSize/10,x.x=this.x-1,x.y=this.y+this.blockSize/1.9-x.h;break;case"+x":x.w=1,x.h=this.blockSize/10,x.x=this.x+this.blockSize,x.y=this.y+this.blockSize/1.9-x.h}return x.xMap=parseInt((x.x/this.blockSize).toString()),x.yMap=parseInt((x.y/this.blockSize).toString()),x.xRMap=parseInt(((x.x+.9*x.w)/this.blockSize).toString()),x.yRMap=parseInt(((x.y+.9*x.h)/this.blockSize).toString()),x}set colisionMap(x){this._colisionMap=x}set eventMap(x){this._eventMap=x}constructor(x,t,i){this.colisorColor=t,this.blockSize=x,this._speed=x/i,this._x=x,this._y=x,this._direction="+y"}checkColision(){return"1"==this._colisionMap[this.yMap][this.xMap]||"1"==this._colisionMap[this.yRMap][this.xMap]||"1"==this._colisionMap[this.yMap][this.xRMap]||"1"==this._colisionMap[this.yRMap][this.xRMap]}checkEventColision(){const x=this._eventMap[this.eventRadarPosition.yMap][this.eventRadarPosition.xMap],t=this._eventMap[this.eventRadarPosition.yRMap][this.eventRadarPosition.xRMap];return"0"!=x?x:t}drawColisionRect(){x.drawRect(this.colisorColor,this.x,this.y,this.blockSize,this.blockSize)}tempRenderEventRadar(){x.drawStrok("red",this.eventRadarPosition.x,this.eventRadarPosition.y,this.eventRadarPosition.w,this.eventRadarPosition.h)}render(){this.drawColisionRect(),this.tempRenderEventRadar()}toLeft(){this._direction="-x",this._x=this._x-this.speed,this.checkColision()&&(this._x=this._x+this.speed)}interative(){"1"===this.checkEventColision()?console.log("AEEE!!"):console.log("NADA!")}toRight(){this._direction="+x",this._x=this._x+this.speed,this.checkColision()&&(this._x=this._x-this.speed)}toTop(){this._direction="-y",this._y=this._y-this.speed,this.checkColision()&&(this._y=this._y+this.speed)}toDown(){this._direction="+y",this._y=this._y+this.speed,this.checkColision()&&(this._y=this._y-this.speed)}}const s={view:[["0","1","1","1","h","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","0"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["h","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","h","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","h","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["0","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","0"]],colision:[["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]],event:[["0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"]]},a={wall_pontas:[document.getElementById("wall_pontas")],wall_all_right:[document.getElementById("wall_all_right")],wall_all_left:[document.getElementById("wall_all_left")],wall_all_down:[document.getElementById("wall_all_down")],wall_top:[document.getElementById("wall_top1"),document.getElementById("wall_top2")],wall_down:[document.getElementById("wall_down1"),document.getElementById("wall_down2")]};(class{static Main(){const t=new i(30,s,a),h=new e(30,"blue",5);h.colisionMap=t.map.colision,h.eventMap=t.map.event,document.onkeydown=function(x){switch(x.keyCode){case 38:h.toTop();break;case 40:h.toDown();break;case 37:h.toLeft();break;case 39:h.toRight();break;case 32:h.interative()}},setInterval((function(){x.clear(),t.render(),h.render()}),1e3/60)}}).Main()})();