(()=>{"use strict";const t=new class{get height(){return this.canvas.height}get width(){return this.canvas.width}constructor(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d")}drawImage(t,e,s,x,i){this.ctx.beginPath(),this.ctx.drawImage(t,e,s,x,i),this.ctx.closePath()}drawStrok(t,e,s,x,i){this.ctx.beginPath(),this.ctx.strokeStyle=t,this.ctx.strokeRect(e,s,x,i),this.ctx.closePath()}drawRect(t,e,s,x,i){this.ctx.beginPath(),this.ctx.fillStyle=t,this.ctx.fillRect(e,s,x,i),this.ctx.closePath()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}};function e(t,e){const s=(Math.random()*(e-t)+t).toString();return parseInt(s)}class s{constructor(t,s,x){this.blockSize=t,this.map=s,this.assets=x,this.wall_top_index=e(0,this.assets.wall_top.length),this.wall_down_index=e(0,this.assets.wall_down.length)}drawImage(e,s,x){t.drawImage(e,s*this.blockSize,x*this.blockSize,this.blockSize,this.blockSize)}colisionCheck(t,e){const s=parseInt((t/this.blockSize).toString()),x=parseInt((e/this.blockSize).toString());return"1"===this.map.colision[x][s]&&t>=s&&t<=s}renderColision(){this.map.colision.forEach(((e,s)=>{e.forEach(((e,x)=>{"1"===e&&t.drawStrok("red",x*this.blockSize,s*this.blockSize,this.blockSize,this.blockSize)}))}))}render(){this.map.view.forEach(((e,s)=>{e.forEach(((e,x)=>{switch(e){case"0":this.drawImage(this.assets.wall_pontas[0],x,s);break;case"1":this.drawImage(this.assets.wall_top[this.wall_top_index],x,s);break;case"2":this.drawImage(this.assets.wall_down[this.wall_down_index],x,s);break;case"3":this.drawImage(this.assets.wall_all_left[0],x,s);break;case"4":this.drawImage(this.assets.wall_all_right[0],x,s);break;case"5":this.drawImage(this.assets.wall_all_down[0],x,s);break;case"x":t.drawStrok("gray",x*this.blockSize,s*this.blockSize,this.blockSize,this.blockSize);break;case"h":t.drawStrok("green",x*this.blockSize,s*this.blockSize,this.blockSize,this.blockSize);break;case"g":t.drawRect("black",x*this.blockSize,s*this.blockSize,this.blockSize,this.blockSize)}}))}))}}class x{get x(){return this._x}get y(){return this._y}get xMap(){return parseInt((this._x/this.blockSize).toString())}get yMap(){return parseInt((this._y/this.blockSize).toString())}get xRMap(){return parseInt(((this._x+.9*this.blockSize)/this.blockSize).toString())}get yRMap(){return parseInt(((this._y+.9*this.blockSize)/this.blockSize).toString())}get direction(){return this._direction}get eventRadarPosition(){const t={x:0,y:0,xMap:0,yMap:0,xRMap:0,yRMap:0,w:0,h:0};switch(this.direction){case"-y":t.w=this.blockSize/10,t.h=1,t.x=this.x+this.blockSize/1.9-t.w,t.y=this.y-1;break;case"+y":t.w=this.blockSize/10,t.h=1,t.x=this.x+this.blockSize/1.9-t.w,t.y=this.y+this.blockSize;break;case"-x":t.w=1,t.h=this.blockSize/10,t.x=this.x-1,t.y=this.y+this.blockSize/1.9-t.h;break;case"+x":t.w=1,t.h=this.blockSize/10,t.x=this.x+this.blockSize,t.y=this.y+this.blockSize/1.9-t.h}return t.xMap=parseInt((t.x/this.blockSize).toString()),t.yMap=parseInt((t.y/this.blockSize).toString()),t.xRMap=parseInt(((t.x+.9*t.w)/this.blockSize).toString()),t.yRMap=parseInt(((t.y+.9*t.h)/this.blockSize).toString()),t}set colisionMap(t){this._colisionMap=t}set eventMap(t){this._eventMap=t}constructor(t,e,s){this.colisorColor=e,this.blockSize=t,this._perPixel=s,this._rightKeyPressed=!1,this._leftKeyPressed=!1,this._topKeyPressed=!1,this._downKeyPressed=!1,this._speedXL=0,this._speedXR=0,this._speedYT=0,this._speedYD=0,this._x=t,this._y=t,this._direction="+y"}checkColision(){return"1"==this._colisionMap[this.yMap][this.xMap]||"1"==this._colisionMap[this.yRMap][this.xMap]||"1"==this._colisionMap[this.yMap][this.xRMap]||"1"==this._colisionMap[this.yRMap][this.xRMap]}checkEventColision(){const t=this._eventMap[this.eventRadarPosition.yMap][this.eventRadarPosition.xMap],e=this._eventMap[this.eventRadarPosition.yRMap][this.eventRadarPosition.xRMap];return"0"!=t?t:e}drawColisionRect(){t.drawRect(this.colisorColor,this.x,this.y,this.blockSize,this.blockSize)}tempRenderEventRadar(){t.drawStrok("red",this.eventRadarPosition.x,this.eventRadarPosition.y,this.eventRadarPosition.w,this.eventRadarPosition.h)}updateSpeed(){this._speedXL=this._leftKeyPressed?-this._perPixel:0,this._speedXR=this._rightKeyPressed?this._perPixel:0,this._speedYT=this._topKeyPressed?-this._perPixel:0,this._speedYD=this._downKeyPressed?this._perPixel:0}render(){this.drawColisionRect(),this.tempRenderEventRadar()}moveProgress(){this.updateSpeed(),this._x+=this._speedXL,this.checkColision()?this._x-=this._speedXL:(this._x+=this._speedXR,this.checkColision()&&(this._x-=this._speedXR)),this._y+=this._speedYT,this.checkColision()?this._y-=this._speedYT:(this._y+=this._speedYD,this.checkColision()&&(this._y-=this._speedYD))}interative(){"1"===this.checkEventColision()?console.log("AEEE!!"):console.log("NADA!")}resetSpeedXL(){this._leftKeyPressed=!1,this._rightKeyPressed&&this.toRight(),this._topKeyPressed&&this.toTop(),this._downKeyPressed&&this.toDown()}resetSpeedXR(){this._rightKeyPressed=!1,this._leftKeyPressed&&this.toLeft(),this._topKeyPressed&&this.toTop(),this._downKeyPressed&&this.toDown()}resetSpeedYT(){this._topKeyPressed=!1,this._downKeyPressed&&this.toDown(),this._leftKeyPressed&&this.toLeft(),this._rightKeyPressed&&this.toRight()}resetSpeedYD(){this._downKeyPressed=!1,this._topKeyPressed&&this.toTop(),this._leftKeyPressed&&this.toLeft(),this._rightKeyPressed&&this.toRight()}toLeft(){this._direction=this._rightKeyPressed?this._direction:"-x",this._leftKeyPressed=!0,console.log(["esquerda",this._direction])}toRight(){this._direction=this._leftKeyPressed?this._direction:"+x",this._rightKeyPressed=!0,console.log(["direita",this._direction])}toTop(){this._direction=this._downKeyPressed?this._direction:"-y",this._topKeyPressed=!0,console.log(["cima",this._direction])}toDown(){this._direction=this._topKeyPressed?this._direction:"+y",this._downKeyPressed=!0,console.log(["baixo",this._direction])}}const i={view:[["0","1","1","1","h","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","0"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["h","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","h","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","h","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["0","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","0"]],colision:[["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]],event:[["0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"]]},h={wall_pontas:[document.getElementById("wall_pontas")],wall_all_right:[document.getElementById("wall_all_right")],wall_all_left:[document.getElementById("wall_all_left")],wall_all_down:[document.getElementById("wall_all_down")],wall_top:[document.getElementById("wall_top1"),document.getElementById("wall_top2")],wall_down:[document.getElementById("wall_down1"),document.getElementById("wall_down2")]};(class{static Main(){const e=new s(30,i,h),o=new x(30,"blue",3);o.colisionMap=e.map.colision,o.eventMap=e.map.event,document.onkeydown=t=>{switch(t.keyCode){case 38:o.toTop();break;case 40:o.toDown();break;case 37:o.toLeft();break;case 39:o.toRight();break;case 32:o.interative()}},document.onkeyup=t=>{switch(t.keyCode){case 38:o.resetSpeedYT();break;case 40:o.resetSpeedYD();break;case 37:o.resetSpeedXL();break;case 39:o.resetSpeedXR()}},setInterval((function(){t.clear(),e.render(),o.moveProgress(),o.render()}),1e3/60)}}).Main()})();