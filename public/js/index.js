(()=>{"use strict";const x=new class{get height(){return this.canvas.height}get width(){return this.canvas.width}constructor(){this.canvas=document.getElementById("canvas"),this.ctx=this.canvas.getContext("2d")}drawImage(x,t,e,i,s){this.ctx.beginPath(),this.ctx.drawImage(x,t,e,i,s),this.ctx.closePath()}drawStrok(x,t,e,i,s){this.ctx.beginPath(),this.ctx.strokeStyle=x,this.ctx.strokeRect(t,e,i,s),this.ctx.closePath()}drawRect(x,t,e,i,s){this.ctx.beginPath(),this.ctx.fillStyle=x,this.ctx.fillRect(t,e,i,s),this.ctx.closePath()}clear(){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height)}};function t(x,t){const e=(Math.random()*(t-x)+x).toString();return parseInt(e)}class e{constructor(x,e,i){this.blockSize=x,this.map=e,this.assets=i,this.wall_top_index=t(0,this.assets.wall_top.length),this.wall_down_index=t(0,this.assets.wall_down.length)}drawImage(t,e,i){x.drawImage(t,e*this.blockSize,i*this.blockSize,this.blockSize,this.blockSize)}colisionCheck(x,t){const e=parseInt((x/this.blockSize).toString()),i=parseInt((t/this.blockSize).toString());return"1"===this.map.colision[i][e]&&x>=e&&x<=e}renderColision(){this.map.colision.forEach(((t,e)=>{t.forEach(((t,i)=>{"1"===t&&x.drawStrok("red",i*this.blockSize,e*this.blockSize,this.blockSize,this.blockSize)}))}))}render(){this.map.view.forEach(((t,e)=>{t.forEach(((t,i)=>{switch(t){case"0":this.drawImage(this.assets.wall_pontas[0],i,e);break;case"1":this.drawImage(this.assets.wall_top[this.wall_top_index],i,e);break;case"2":this.drawImage(this.assets.wall_down[this.wall_down_index],i,e);break;case"3":this.drawImage(this.assets.wall_all_left[0],i,e);break;case"4":this.drawImage(this.assets.wall_all_right[0],i,e);break;case"5":this.drawImage(this.assets.wall_all_down[0],i,e);break;case"x":x.drawStrok("gray",i*this.blockSize,e*this.blockSize,this.blockSize,this.blockSize);break;case"h":x.drawStrok("green",i*this.blockSize,e*this.blockSize,this.blockSize,this.blockSize);break;case"g":x.drawRect("black",i*this.blockSize,e*this.blockSize,this.blockSize,this.blockSize)}}))}))}}class i{get x(){return this._x}get y(){return this._y}get xMap(){return parseInt((this._x/this.blockSize).toString())}get yMap(){return parseInt((this._y/this.blockSize).toString())}get xRMap(){return parseInt(((this._x+.9*this.blockSize)/this.blockSize).toString())}get yRMap(){return parseInt(((this._y+.9*this.blockSize)/this.blockSize).toString())}get direction(){return this._direction}get eventRadarPosition(){const x={x:0,y:0,xMap:0,yMap:0,xRMap:0,yRMap:0,w:0,h:0};switch(this.direction){case"-y":x.w=this.blockSize/10,x.h=1,x.x=this.x+this.blockSize/1.9-x.w,x.y=this.y-1;break;case"+y":x.w=this.blockSize/10,x.h=1,x.x=this.x+this.blockSize/1.9-x.w,x.y=this.y+this.blockSize;break;case"-x":x.w=1,x.h=this.blockSize/10,x.x=this.x-1,x.y=this.y+this.blockSize/1.9-x.h;break;case"+x":x.w=1,x.h=this.blockSize/10,x.x=this.x+this.blockSize,x.y=this.y+this.blockSize/1.9-x.h}return x.xMap=parseInt((x.x/this.blockSize).toString()),x.yMap=parseInt((x.y/this.blockSize).toString()),x.xRMap=parseInt(((x.x+.9*x.w)/this.blockSize).toString()),x.yRMap=parseInt(((x.y+.9*x.h)/this.blockSize).toString()),x}set colisionMap(x){this._colisionMap=x}set eventMap(x){this._eventMap=x}constructor(x,t,e){this.colisorColor=t,this.blockSize=x,this._perPixel=e,this._speedXR=0,this._speedXL=0,this._speedYT=0,this._speedYB=0,this._x=x,this._y=x,this._direction="+y"}checkColision(){return"1"==this._colisionMap[this.yMap][this.xMap]||"1"==this._colisionMap[this.yRMap][this.xMap]||"1"==this._colisionMap[this.yMap][this.xRMap]||"1"==this._colisionMap[this.yRMap][this.xRMap]}checkEventColision(){const x=this._eventMap[this.eventRadarPosition.yMap][this.eventRadarPosition.xMap],t=this._eventMap[this.eventRadarPosition.yRMap][this.eventRadarPosition.xRMap];return"0"!=x?x:t}drawColisionRect(){x.drawRect(this.colisorColor,this.x,this.y,this.blockSize,this.blockSize)}tempRenderEventRadar(){x.drawStrok("red",this.eventRadarPosition.x,this.eventRadarPosition.y,this.eventRadarPosition.w,this.eventRadarPosition.h)}render(){this.drawColisionRect(),this.tempRenderEventRadar()}moveProgress(){this._x+=this._speedXR,this._x+=this._speedXL,this._y+=this._speedYT,this._y+=this._speedYB,this.checkColision()&&(this._x-=this._speedXR,this._x-=this._speedXL,this._y-=this._speedYT,this._y-=this._speedYB)}interative(){"1"===this.checkEventColision()?console.log("AEEE!!"):console.log("NADA!")}resetSpeedXR(){this._direction="-x",this._speedXR=0}resetSpeedXL(){this._direction="+x",this._speedXL=0}resetSpeedYT(){this._direction="+y",this._speedYT=0}resetSpeedYB(){this._direction="-y",this._speedYB=0}toLeft(){this._direction="-x",this._speedXL=-this._perPixel}toRight(){this._direction="+x",this._speedXR=this._perPixel}toTop(){console.log("aqui"),this._direction="-y",this._speedYT=-this._perPixel}toDown(){this._direction="+y",this._speedYB=this._perPixel}}const s={view:[["0","1","1","1","h","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","0"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["h","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","h","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","h","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","g","g","g","g","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["3","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","x","4"],["0","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","5","0"]],colision:[["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","1","1","1","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","1"],["1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1","1"]],event:[["0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","1","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"],["0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0","0"]]},o={wall_pontas:[document.getElementById("wall_pontas")],wall_all_right:[document.getElementById("wall_all_right")],wall_all_left:[document.getElementById("wall_all_left")],wall_all_down:[document.getElementById("wall_all_down")],wall_top:[document.getElementById("wall_top1"),document.getElementById("wall_top2")],wall_down:[document.getElementById("wall_down1"),document.getElementById("wall_down2")]};(class{static Main(){const t=new e(30,s,o),a=new i(30,"blue",3);a.colisionMap=t.map.colision,a.eventMap=t.map.event,document.onkeydown=x=>{switch(console.log("'''''''''''''"),console.log(x.keyCode),console.log("'''''''''''''"),x.keyCode){case 38:a.toTop();break;case 40:a.toDown();break;case 37:a.toLeft();break;case 39:a.toRight();break;case 32:a.interative()}},document.onkeyup=x=>{switch(x.keyCode){case 38:a.resetSpeedYT();break;case 40:a.resetSpeedYB();break;case 37:a.resetSpeedXL();break;case 39:a.resetSpeedXR()}},setInterval((function(){x.clear(),t.render(),a.moveProgress(),a.render()}),1e3/60)}}).Main()})();